<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>fuzzy 9</title>
        <!-- //bootstrap css -->
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9"
            crossorigin="anonymous"
        >
        <!-- //bootstrap js -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
        <!-- //chart js -->
        <script src="https://cdn.jsdelivr.net/npm/chart.js@4.3.3/dist/chart.umd.min.js"></script>
        <!-- //jquery -->
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
        <!-- MathJax -->
        <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

        <style>
            .result {
                font-size: 1.2rem;
                padding: 0;
                border-radius: 4px;
                font-weight: 600;
                color: rgb(241, 201, 59);
            }
            .result-red {
                font-size: 1.2rem;
                padding: 0;
                border-radius: 4px;
                font-weight: 600;
                color: rgb(243, 21, 89);
            }
            .result-blue {
                font-size: 1.2rem;
                padding: 0;
                border-radius: 4px;
                font-weight: 600;
                color: rgb(117, 194, 246);
            }
            #math-equation2 {
                display: inline-block !important;
                width: auto;
                display: flex;
                justify-content: center;
                align-items: center;
            }
            #math-equation{
                display: inline-block !important;
                width: auto;
                display: flex;
                justify-content: center;
                align-items: center;
                font-size: 1.5rem;
                padding: 30px 10px;
            }
            .chart_res {
                display: inline-block !important;
                width: auto;
                display: flex;
                justify-content: center;
                align-items: center;
                font-size: 1.2rem;
                padding: 0;
                border-radius: 4px;
                font-weight: 600;
            }
            .math-scrool{
                width: 100%;
                overflow-x: scroll;
                padding: 10px 30px;
            }
        </style>
    <body>
        <div class="container">
            <div class="row mt-5">
                <div class="col-12 text-center">
                    <h3>1. Scopusdagi maqolalar soni</h3>
                </div>
                <div class="col-6">
                    <div style="height: 0.5rem;"></div>
                    <canvas id="myChart_1" width="400"></canvas>
                </div>
                <div class="col-6">
                    <div class="d-flex justify-content-center m-0 p-0">
                        <p class="p-0 m-0" style="font-size: 1.2rem;">
                            Natija: x1: 
                            <span class="output_1 result-blue">7</span> da 
                            <span id="norm_val_1" class="result-blue">1.00</span> bilan 
                            <span id="text_1" class="result-blue">Yaxshi</span> 
                            <span id="n_norm_val_1" class="result-blue"></span> 
                            <span id="hide_word_1" style="display: none;">bilan</span> 
                            <span id="n_text_1" class="result-blue"></span> ga tegishli
                        </p>
                    </div>
                    
                    <canvas id="dragChart_1" width="400"></canvas>
                    <div class="row">
                        <div class="col-1 d-flex align-items-center">
                            <span id="range_value_1" style="font-weight: 700; font-size: 1.2rem;">7</span>
                        </div>
                        <div class="col-11 d-flex align-items-center">
                            <input type="number" id="inputNumber1" min="0" value="7" style="width: 100%" />
                        </div>
                    </div>
                </div>
            </div>
            <div class="row mt-5">
                <div class="col-12 text-center">
                    <h3>2. Scopusdagi H indeksi</h3>
                </div>
                <div class="col-6 mt-5">
                    <canvas id="myChart_2" width="400"></canvas>
                </div>
                <div class="col-6 mt-4">
                    <div class="d-flex justify-content-center m-0 p-0">
                        <p class="p-0 m-0" style="font-size: 1.2rem;">
                            Natija: x2: 
                            <span class="output_2 result">1</span> da 
                            <span id="norm_val_2" class="result">1.00</span> bilan 
                            <span id="text_2" class="result">o'rta</span> 
                            <span id="n_norm_val_2" class="result"></span> 
                            <span id="hide_word_2" style="display: none;">bilan</span> 
                            <span id="n_text_2" class="result"></span> ga tegishli
                        </p>
                    </div>
                    <canvas id="dragChart_2" width="400"></canvas>
                    <div class="row">
                        <div class="col-1 d-flex align-items-center">
                            <span id="range_value_2" style="font-weight: 700; font-size: 1.2rem;">1</span>
                        </div>
                        <div class="col-11 d-flex align-items-center">
                            <input type="number" id="inputNumber2" min="0" value="1" style="width: 100%" />
                        </div>
                    </div>
                </div>
            </div>
            <div class="row mt-5">
                <div class="col-12 text-center">
                    <h3>3. Web of science maqolalar soni</h3>
                </div>
                <div class="col-6 mt-4">
                    <canvas id="myChart_3" width="400"></canvas>
                </div>
                <div class="col-6 mt-3">
                    <div class="d-flex justify-content-center m-0 p-0">
                        <p class="p-0 m-0" style="font-size: 1.2rem;">
                            Natija: x3: 
                            <span class="output_3 result-red">0</span> da 
                            <span id="norm_val_3" class="result-red">1.00</span> bilan 
                            <span id="text_3" class="result-red">o'rta</span> 
                            <span id="n_norm_val_3" class="result-red"></span> 
                            <span id="hide_word_3" style="display: none;">bilan</span> 
                            <span id="n_text_3" class="result-red"></span> ga tegishli
                        </p>
                    </div>
                    <canvas id="dragChart_3" width="400"></canvas>
                    <div class="row">
                        <div class="col-1 d-flex align-items-center">
                            <span id="range_value_3" style="font-weight: 700; font-size: 1.2rem;">0</span>
                        </div>
                        <div class="col-11 d-flex align-items-center">
                            <input type="number" id="inputNumber3" min="0" value="0" style="width: 100%" />
                        </div>
                    </div>
                </div>
            </div>
            <div class="row mt-5">
                <div class="col-12 text-center">
                    <h3>4. Web of science H indeksi</h3>
                </div>
                <div class="col-6 mt-5">
                    <canvas id="myChart_4" width="400"></canvas>
                </div>
                <div class="col-6 mt-4">
                    <div class="d-flex justify-content-center m-0 p-0">
                        <p class="p-0 m-0" style="font-size: 1.2rem;">
                            <p class="p-0 m-0" style="font-size: 1.2rem;">
                                Natija: x4: 
                                <span class="output_4 result">1</span> da 
                                <span id="norm_val_4" class="result">1.00</span> bilan 
                                <span id="text_4" class="result">o'rta</span> 
                                <span id="n_norm_val_4" class="result"></span> 
                                <span id="hide_word_4" style="display: none;">bilan</span> 
                                <span id="n_text_4" class="result"></span> ga tegishli
                            </p>
                    </div>
                    <canvas id="dragChart_4" width="400"></canvas>
                    <div class="row">
                        <div class="col-1 d-flex align-items-center">
                            <span id="range_value_4" style="font-weight: 700; font-size: 1.2rem;">1</span>
                        </div>
                        <div class="col-11 d-flex align-items-center">
                            <input type="number" id="inputNumber4" min="0" value="1" style="width: 100%" />
                        </div>
                    </div>
                </div>
            </div>
            <div class="row mt-5">
                <div class="col-12 text-center">
                    <h3>5. Ilmiy daraja</h3>
                </div>
                <div class="col-6 mt-5">
                    <canvas id="myChart_5" width="400"></canvas>
                </div>
                <div class="col-6 mt-4">
                    <div class="d-flex justify-content-center m-0 p-0">
                        <p class="p-0 m-0" style="font-size: 1.2rem;">
                            Natija: x5: 
                            <span class="output_5 result">1</span> da 
                            <span id="norm_val_5" class="result">1.00</span> bilan 
                            <span id="text_5" class="result">o'rta</span> 
                            <span id="n_norm_val_5" class="result"></span> 
                            <span id="hide_word_5" style="display: none;">bilan</span> 
                            <span id="n_text_5" class="result"></span> ga tegishli
                        </p>
                    </div>
                    <canvas id="dragChart_5" width="400"></canvas>
                    <div class="row">
                        <div class="col-1 d-flex align-items-center">
                            <span id="range_value_5" style="font-weight: 700; font-size: 1.2rem;">1</span>
                        </div>
                        <div class="col-11 d-flex align-items-center">
                            <select id="inputNumber5">
                                <option value="0">Darajasiz</option>
                                <option value="1" selected>PhD</option>
                                <option value="2">DS, Professor, ...</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row mt-5">
                <div class="col-12 text-center">
                    <h3>6. Himoya qilgan shogirdlar soni</h3>
                </div>
                <div class="col-6 mt-5">
                    <canvas id="myChart_6" width="400"></canvas>
                </div>
                <div class="col-6 mt-4">
                    <div class="d-flex justify-content-center m-0 p-0">
                        <p class="p-0 m-0" style="font-size: 1.2rem;">
                            Natija: x6: 
                            <span class="output_6 result">2</span> da 
                            <span id="norm_val_6" class="result">1.00</span> bilan 
                            <span id="text_6" class="result">o'rta</span> 
                            <span id="n_norm_val_6" class="result"></span> 
                            <span id="hide_word_6" style="display: none;">bilan</span> 
                            <span id="n_text_6" class="result"></span> ga tegishli
                        </p>
                    </div>
                    <canvas id="dragChart_6" width="400"></canvas>
                    <div class="row">
                        <div class="col-1 d-flex align-items-center">
                            <span id="range_value_6" style="font-weight: 700; font-size: 1.2rem;">2</span>
                        </div>
                        <div class="col-11 d-flex align-items-center">
                            <input type="number" id="inputNumber6" min="0" value="2" style="width: 100%" />
                        </div>
                    </div>
                </div>
            </div>
            <div class="row mt-5">
                <div class="col-12 text-center">
                    <h3>7. Ilmiy loyiha soni</h3>
                </div>
                <div class="col-6 mt-5">
                    <canvas id="myChart_7" width="400"></canvas>
                </div>
                <div class="col-6 mt-4">
                    <div class="d-flex justify-content-center m-0 p-0">
                        <p class="p-0 m-0" style="font-size: 1.2rem;">
                            Natija: x7: 
                            <span class="output_7 result-red">0</span> da 
                            <span id="norm_val_7" class="result-red">1.00</span> bilan 
                            <span id="text_7" class="result-red">Past</span> 
                            <span id="n_norm_val_7" class="result-red"></span> 
                            <span id="hide_word_7" style="display: none;">bilan</span> 
                            <span id="n_text_7" class="result-red"></span> ga tegishli
                        </p>
                    </div>
                    <canvas id="dragChart_7" width="400"></canvas>
                    <div class="row">
                        <div class="col-4 d-flex align-items-center">
                            <span id="range_value_7" style="font-weight: 700; font-size: 1.2rem;">0</span><span style="font-weight: 700; font-size: 1.2rem;">&nbsp; mln</span>
                        </div>
                        <div class="col-8 d-flex align-items-center">
                            <input type="number" id="inputNumber7" min="0" value="0" style="width: 100%" />
                        </div>
                    </div>
                </div>
            </div>
            <div class="row mt-5">
                <div class="col-12 text-center">
                    <h3>8. Patentlar soni</h3>
                </div>
                <div class="col-6">
                    <div style="height: 0.5rem;"></div>
                    <canvas id="myChart_8" width="400"></canvas>
                </div>
                <div class="col-6">
                    <div class="d-flex justify-content-center m-0 p-0">
                        <p class="p-0 m-0" style="font-size: 1.2rem;">
                            Natija: x8: 
                            <span class="output_8 result">2</span> da 
                            <span id="norm_val_8" class="result">1.00</span> bilan 
                            <span id="text_8" class="result">o'rta</span> 
                            <span id="n_norm_val_8" class="result"></span> 
                            <span id="hide_word_8" style="display: none;">bilan</span> 
                            <span id="n_text_8" class="result"></span> ga tegishli
                        </p>
                    </div>
                    
                    <canvas id="dragChart_8" width="400"></canvas>
                    <div class="row">
                        <div class="col-1 d-flex align-items-center">
                            <span id="range_value_8" style="font-weight: 700; font-size: 1.2rem;">2</span>
                        </div>
                        <div class="col-11 d-flex align-items-center">
                            <input type="number" id="inputNumber8" min="0" value="2" style="width: 100%" />
                        </div>
                    </div>
                </div>
            </div>
            <div class="row mt-5">
                <div class="col-12 text-center">
                    <h3>9. Xorijiy universitetlarda ma'ruz o'tganligi</h3>
                </div>
                <div class="col-6">
                    <div style="height: 0.5rem;"></div>
                    <canvas id="myChart_9" width="400"></canvas>
                </div>
                <div class="col-6">
                    <div class="d-flex justify-content-center m-0 p-0">
                        <p class="p-0 m-0" style="font-size: 1.2rem;">
                            Natija: x9: 
                            <span class="output_9 result">1200</span> da 
                            <span id="norm_val_9" class="result">1.00</span> bilan 
                            <span id="text_9" class="result">o'rta</span> 
                            <span id="n_norm_val_9" class="result"></span> 
                            <span id="hide_word_9" style="display: none;">bilan</span> 
                            <span id="n_text_9" class="result"></span> ga tegishli
                        </p>
                    </div>
                    
                    <canvas id="dragChart_9" width="400"></canvas>
                    <div class="row">
                        <div class="col-2 d-flex align-items-center">
                            <span id="range_value_9" style="font-weight: 700; font-size: 1.2rem;">1200</span>
                        </div>
                        <div class="col-10 d-flex align-items-center">
                            <input type="number" id="inputNumber9" min="0" value="1200" style="width: 100%" />
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">

                <div class="col-12">
                    <canvas id="chart_result" width="400"></canvas>
                </div>
            </div>
            <div class="row mb-5">
                <div class="col-4 text-center">
                  <h4 id="result"></h4>
                </div>
                <div class="box">
                  <div id="math-equation1">
                    \begin{equation} \mu_{\varepsilon}=\mu_1 \cup \mu_2 \cup \mu_3 \cup
                    \mu_4 \cup \mu_5 \cup \mu_6 \cup \mu_7 \end{equation}
                  </div>
                  <div class="row d-flex justify-content-center align-items-center">
                    <div id="math-equation2" style="display: inline-block;">
                      \begin{equation} \omega_0=\frac{\int_{\Omega} \omega
                      \mu_{\varepsilon}(\omega) d \omega}{\int_{\Omega}
                      \mu_{\varepsilon}(\omega) d \omega} =  \end{equation}
                    </div>
                    <div class="chart_res pb-1"></div>
                  </div>
                </div>
                <div id="math-equation" class="math-equation math-scrool"></div>
              </div>
        </div>
        <script>
            const x = [];
            for (let i = 0; i <= 100; i++) {
            x.push(i / 10);
            }
            function trapezoidalMF(a, b, c, d) {
            const array = [];
            if (a === b) {
                for (const i of x) {
                if (i >= b && i <= c) {
                    array.push(1);
                } else if (i > c && i <= d) {
                    array.push((d - i) / (d - c));
                } else {
                    array.push(0);
                }
                }
            } else if (c === d) {
                for (const i of x) {
                if (i >= b && i <= c) {
                    array.push(1);
                } else if (i >= a && i < b) {
                    array.push((i - a) / (b - a));
                } else {
                    array.push(0);
                }
                }
            } else {
                for (const i of x) {
                if (i <= b && i >= a) {
                    array.push((i - b) / (b - a));
                } else if (i > b && i <= c) {
                    array.push(1);
                } else if (i > c && i <= d) {
                    array.push((d - i) / (d - c));
                } else {
                    array.push(0);
                }
                }
            }
            return array;
            }

            function triangularMF(a, b, c) {
            const array = [];
            if (a === b) {
                for (const i of x) {
                if (i >= b && i <= c) {
                    array.push((c - i) / (c - b));
                } else {
                    array.push(0);
                }
                }
            } else if (b === c) {
                for (const i of x) {
                if (i >= a && i <= b) {
                    array.push((i - a) / (b - a));
                } else {
                    array.push(0);
                }
                }
            } else {
                for (const i of x) {
                if (i >= a && i <= b) {
                    array.push((i - a) / (b - a));
                } else if (i > b && i <= c) {
                    array.push((c - i) / (c - b));
                } else {
                    array.push(0);
                }
                }
            }
            return array;
            }

            function normal(F, z) {
                const a = [];
                for (let i = 0; i <= 100; i++) {
                    if (F[Math.floor(10 * z)] > F[i]) {
                    a.push(F[i]);
                    } else {
                    a.push(F[Math.floor(10 * z)]);
                    }
                }
                return a;
            }

            function qwerty(F, y) {
                const array = F.filter((i) => i[Math.floor(y * 10)] !== 0);
                const membership_values = array.map((j) => j[Math.floor(y * 10)]);
                const c = Math.min(...membership_values);
                for (const i of array) {
                    if (c === i[Math.floor(y * 10)]) {
                    return i;
                    }
                }
            }

            function qwerty1(F, y) {
                const array = F.filter(i => i[Math.floor(y * 10)] !== 0);
                const membership_values = array.map(j => j[Math.floor(y * 10)]);
                const c = Math.max(...membership_values);
                for (const i of array) {
                    if (c === i[Math.floor(y * 10)]) {
                        return i;
                    }
                }
            }

            var A_1_mf = trapezoidalMF(0, 0, 2, 4);
            var B_1_mf = triangularMF(2, 4, 6);
            var C_1_mf = triangularMF(4, 6, 8);
            var D_1_mf = trapezoidalMF(6, 8, 10, 10);

            var A_2_mf = trapezoidalMF(0, 0, 3, 5);
            var B_2_mf = triangularMF(3, 5, 7);
            var C_2_mf = trapezoidalMF(5, 7, 10, 10);
            
            
            var q1 = [A_1_mf, B_1_mf, C_1_mf, D_1_mf];
            var q2 = [A_1_mf, B_1_mf, C_1_mf, D_1_mf];
            var q3 = [A_1_mf, B_1_mf, C_1_mf, D_1_mf];
            var q4 = [A_1_mf, B_1_mf, C_1_mf, D_1_mf];
            var q5 = [A_2_mf, B_2_mf, C_2_mf];
            var q6 = [A_2_mf, B_2_mf, C_2_mf];
            var q7 = [A_1_mf, B_1_mf, C_1_mf, D_1_mf];
            var q8 = [A_2_mf, B_2_mf, C_2_mf];
            var q9 = [A_1_mf, B_1_mf, C_1_mf, D_1_mf];

            var x1 = 5;
            var x2 = 5;
            var x3 = 5;
            var x4 = 5;
            var x5 = 5;
            var x6 = 5;
            var x7 = 5;
            var x8 = 5;
            var x9 = 5;

            function calc(xs){
                var p1 = normal(qwerty(q1, xs[0]), xs[0]);
                var p2 = normal(qwerty(q2, xs[1]), xs[1]);
                var p3 = normal(qwerty(q3, xs[2]), xs[2]);
                var p4 = normal(qwerty(q4, xs[3]), xs[3]);
                var p5 = normal(qwerty(q5, xs[4]), xs[4]);
                var p6 = normal(qwerty(q6, xs[5]), xs[5]);
                var p7 = normal(qwerty(q7, xs[6]), xs[6]);
                var p8 = normal(qwerty(q8, xs[7]), xs[7]);
                var p9 = normal(qwerty(q9, xs[8]), xs[8]);
                total = [];
                var fuzzy_set = [p1, p2, p3, p4, p5, p6, p7, p8, p9];
                var total = fuzzy_set[0].map((_, i) =>
                    Math.max(
                    p1[i],
                    p2[i],
                    p3[i],
                    p4[i],
                    p5[i],
                    p6[i],
                    p7[i],
                    p8[i],
                    p9[i]
                    )
                );
                let s = 0;
                let p = 0;
                let result = 0;
                for (let i = 0; i <= 100; i++) {
                    s += total[i];
                    p += total[i] * x[i];
                }
                result = p / s;
                var equationSpan = document.querySelector(".chart_res");
                equationSpan.innerHTML = result.toFixed(2);
                return {
                    total: total,
                    result: result,
                };
            }
            function clear_zero(fuzz){
                var clear_total = []
                for (let i = 0; i < fuzz.length; i++) {
                    if (fuzz[i] != 0) {
                        clear_total.push(fuzz[i]);
                    }
                }
                return clear_total;
            }

            function updateAll(xs) {
                var p1 = normal(qwerty(q1, xs[0]), xs[0]);
                var p2 = normal(qwerty(q2, xs[1]), xs[1]);
                var p3 = normal(qwerty(q3, xs[2]), xs[2]);
                var p4 = normal(qwerty(q4, xs[3]), xs[3]);
                var p5 = normal(qwerty(q5, xs[4]), xs[4]);
                var p6 = normal(qwerty(q6, xs[5]), xs[5]);
                var p7 = normal(qwerty(q7, xs[6]), xs[6]);
                var p8 = normal(qwerty(q8, xs[7]), xs[7]);
                var p9 = normal(qwerty(q9, xs[8]), xs[8]);
                total = [];
                var fuzzy_set = [p1, p2, p3, p4, p5, p6, p7, p8, p9];
                var total = fuzzy_set[0].map((_, i) =>
                    Math.max(
                    p1[i],
                    p2[i],
                    p3[i],
                    p4[i],
                    p5[i],
                    p6[i],
                    p7[i],
                    p8[i],
                    p9[i]
                    )
                );

                
                let s = 0;
                let p = 0;
                let result = 0;
                for (let i = 0; i <= 100; i++) {
                    s += total[i];
                    p += total[i] * x[i];
                }
                total = clear_zero(total);
                result_all = p / s;
                var equationDiv = document.querySelector(".math-equation");

                    var equation = "\\(\\frac{";
                    for (var i = 0; i <= total.length - 1; i++) {
                        equation += "\(" + total[i].toFixed(2) + " \\cdot " + i + "\)" ;
                        if (i < total.length-1) {
                            equation += " + ";
                        }
                    }
                    equation += "}{";
                    for (var i = 0; i <= total.length-1; i++) {
                        equation += total[i].toFixed(2);
                        if (i < total.length-1) {
                            equation += " + ";
                        }
                    }
            
                    equation += "} = " + result_all.toFixed(2) +"\\)";
                    equationDiv.innerHTML = equation;
                    MathJax.typesetPromise();
                }

            class ChartComponent {
                constructor(canvasId) {
                    this.canvasId = canvasId;
                }
                createLineChart(data) {
                    const ctx = document.getElementById(this.canvasId).getContext('2d');
                    var all_data = [];
                    for (let i = 0; i < data.length; i++) {
                        all_data.push({
                            label: data[i][0],
                            data: data[i][1],
                            borderColor: data[i][2],
                            borderWidth: 3,
                            pointRadius: 0,
                        });
                    }

                    const LineChart = new Chart(ctx, {
                        type: 'line',
                        data: {
                            labels: x,
                            datasets: all_data
                        },
                        options: {
                            scales: {
                                y: {
                                    beginAtZero: true
                                }
                            }
                        }
                    });
                }
            }
            function createData(q) {
                const data = [];
                const labels_3 = ["Past", "Yaxshi", "Yuqori"];
                const labels_4 = ["Past", "O'rta", "Yaxshi", "Yuqori"]
                const color_3 = ["rgb(243, 21, 89)", "rgb(241, 201, 59)", "rgb(0, 255, 0)"]
                const color_4 = ["rgb(243, 21, 89)", "rgb(241, 201, 59)", "rgb(117, 194, 246)","rgb(0, 255, 0)"]
                if (q.length == 3) {
                    for (let i = 0; i < q.length; i++) {
                        data.push([labels_3[i], q[i], color_3[i]]);
                    }
                } else {
                    for (let i = 0; i < q.length; i++) {
                        data.push([labels_4[i], q[i], color_4[i]]);
                    }
                }
                return data;
            }
            
            data_1 = createData(q1);
            data_2 = createData(q2);
            data_3 = createData(q3);
            data_4 = createData(q4);
            data_5 = createData(q5);
            data_6 = createData(q6);
            data_7 = createData(q7);
            data_8 = createData(q8);
            data_9 = createData(q9);
    
            const chart_1 = new ChartComponent("myChart_1");
            const chart_2 = new ChartComponent("myChart_2");
            const chart_3 = new ChartComponent("myChart_3");
            const chart_4 = new ChartComponent("myChart_4");
            const chart_5 = new ChartComponent("myChart_5");
            const chart_6 = new ChartComponent("myChart_6");
            const chart_7 = new ChartComponent("myChart_7");
            const chart_8 = new ChartComponent("myChart_8");
            const chart_9 = new ChartComponent("myChart_9");
    
            chart_1.createLineChart(data_1);
            chart_2.createLineChart(data_2);
            chart_3.createLineChart(data_3);
            chart_4.createLineChart(data_4);
            chart_5.createLineChart(data_5);
            chart_6.createLineChart(data_6);
            chart_7.createLineChart(data_7);
            chart_8.createLineChart(data_8);
            chart_9.createLineChart(data_9);

            class DragChartComponent {
                constructor(canvasId) {
                    this.canvasId = canvasId;
                    this.chart = null; 
                }
                createDragChart(data) {
                    const ctx = document.getElementById(this.canvasId).getContext('2d');

                    var all_data = [];
                    for (let i = 0; i < data.length; i++) {
                        all_data.push({
                            data: data[i][0],
                            borderColor: data[i][1],
                            fill: data[i][2],
                            borderWidth: 3,
                            pointRadius: 0,
                        });
                    }
                    const chartConfig = {
                        type: 'line',
                        data: {
                            labels: x,
                            datasets: all_data,
                        },
                        options: {
                            plugins: {
                                legend: {
                                    display: false,
                                },
                            },
                            scales: {
                                y: {
                                    beginAtZero: true,
                                },
                            },
                        },
                    };

                    this.chart = new Chart(ctx, chartConfig);
                }

                updateChartData(newData) {
                    if (this.chart) {
                        var all_data = [];
                        for (let i = 0; i < newData.length; i++) {
                            all_data.push({
                                data: newData[i][0],
                                borderColor: newData[i][1],
                                fill: newData[i][2],
                                borderWidth: 3,
                                pointRadius: 0,
                            });
                        }
                        this.chart.data.datasets = all_data;
                        this.chart.update();
                    }
                }
            }
            
            const initialData_1 = [[qwerty(q1, 6), "rgb(117, 194, 246)", false], [normal(qwerty(q1, 6), 6), "rgb(117, 194, 246)", true], [[[6, 0], [6, 1]], "rgb(1, 0, 0)", false]];
            const initialData_2 = [[qwerty(q2, 4), "rgb(241, 201, 59)", false], [normal(qwerty(q2, 4), 4), "rgba(241, 201, 59, 0)", true], [[[4, 0], [4, 1]], "rgb(1, 0, 0)", false]];
            const initialData_3 = [[qwerty(q3, 0), "rgb(243, 21, 89)", false], [normal(qwerty(q3, 0), 0), "rgb(243, 21, 89)", true], [[[0, 0], [0, 1]], "rgb(1, 0, 0)", false]];
            const initialData_4 = [[qwerty(q4, 4), "rgb(241, 201, 59)", false], [normal(qwerty(q4, 4), 4), "rgba(241, 201, 59, 0)", true], [[[4, 0], [4, 1]], "rgb(1, 0, 0)", false]];
            const initialData_5 = [[qwerty(q5, 5), "rgb(241, 201, 59)", false], [normal(qwerty(q5, 5), 5), "rgba(241, 201, 59, 0)", true], [[[5, 0], [5, 1]], "rgb(1, 0, 0)", false]];
            const initialData_6 = [[qwerty(q6, 5), "rgb(241, 201, 59)", false], [normal(qwerty(q6, 5), 5), "rgba(241, 201, 59, 0)", true], [[[5, 0], [5, 1]], "rgb(1, 0, 0)", false]];
            const initialData_7 = [[qwerty(q7, 0), "rgb(243, 21, 89)", false], [normal(qwerty(q7, 0), 0), "rgb(243, 21, 89)", true], [[[0, 0], [0, 1]], "rgb(1, 0, 0)", false]];
            const initialData_8 = [[qwerty(q8, 5), "rgb(241, 201, 59)", false], [normal(qwerty(q8, 5), 5), "rgba(241, 201, 59, 0)", true], [[[5, 0], [5, 1]], "rgb(1, 0, 0)", false]];
            const initialData_9 = [[qwerty(q9, 4), "rgb(241, 201, 59)", false], [normal(qwerty(q9, 4), 4), "rgba(241, 201, 59, 0)", true], [[[4, 0], [4, 1]], "rgb(1, 0, 0)", false]];

            const dragChart_1 = new DragChartComponent("dragChart_1");
            const dragChart_2 = new DragChartComponent("dragChart_2");
            const dragChart_3 = new DragChartComponent("dragChart_3");
            const dragChart_4 = new DragChartComponent("dragChart_4");
            const dragChart_5 = new DragChartComponent("dragChart_5");
            const dragChart_6 = new DragChartComponent("dragChart_6");
            const dragChart_7 = new DragChartComponent("dragChart_7");
            const dragChart_8 = new DragChartComponent("dragChart_8");
            const dragChart_9 = new DragChartComponent("dragChart_9");

            dragChart_1.createDragChart(initialData_1);
            dragChart_2.createDragChart(initialData_2);
            dragChart_3.createDragChart(initialData_3);
            dragChart_4.createDragChart(initialData_4);
            dragChart_5.createDragChart(initialData_5);
            dragChart_6.createDragChart(initialData_6);
            dragChart_7.createDragChart(initialData_7);
            dragChart_8.createDragChart(initialData_8);
            dragChart_9.createDragChart(initialData_9);

            function type_input(input_id){
                var old_value = document.getElementById(input_id).value;
                var new_value;
                if (input_id == "inputNumber1"){
                    if (old_value == 0) {
                        new_value = 0;
                    } else if (old_value == 1) {
                        new_value = 2.4;
                    } else if (old_value == 2) {
                        new_value = 3.2;
                    } else if (old_value == 3) {
                        new_value = 4.2;
                    } else if (old_value == 4) {
                        new_value = 5.2;
                    } else if (old_value == 5) {
                        new_value = 5.6;
                    } else if (old_value == 6) {
                        new_value = 4.4;
                    } else if (old_value == 7) {
                        new_value = 6;
                    } else if (old_value == 8) {
                        new_value = 7.8;
                    } else if (old_value == 9) {
                        new_value = 6.8;
                    } else if (old_value == 10) {
                        new_value = 7.2;
                    } else {
                        new_value = 10;
                    }
                } else if (input_id == "inputNumber2"){
                    if (old_value == 0){
                        new_value = 0;
                    }else if (old_value == 1){
                        new_value = 4;
                    }else if (old_value == 2){
                        new_value = 6;
                    }else if (old_value == 3){
                        new_value = 8;
                    }else if (old_value > 3){
                        new_value = 10;
                    }
                } else if (input_id == "inputNumber3"){
                    if (old_value == 0) {
                        new_value = 0;
                    } else if (old_value == 1) {
                        new_value = 2.4;
                    } else if (old_value == 2) {
                        new_value = 3.2;
                    } else if (old_value == 3) {
                        new_value = 4.2;
                    } else if (old_value == 4) {
                        new_value = 5.2;
                    } else if (old_value == 5) {
                        new_value = 5.6;
                    } else if (old_value == 6) {
                        new_value = 4.4;
                    } else if (old_value == 7) {
                        new_value = 5.6;
                    } else if (old_value == 8) {
                        new_value = 6;
                    } else if (old_value == 9) {
                        new_value = 6.4;
                    } else if (old_value == 10) {
                        new_value = 7.6;
                    } else if (old_value == 11) {
                        new_value = 8;
                    } else {
                        new_value = 10;
                    }

                } else if (input_id == "inputNumber4"){
                    if (old_value == 0){
                        new_value = 0;
                    }else if (old_value == 1){
                        new_value = 4;
                    }else if (old_value == 2){
                        new_value = 5;
                    }else if (old_value == 3){
                        new_value = 6;
                    }else if (old_value == 4){
                        new_value = 7.6;
                    }else if (old_value == 5){
                        new_value = 8;
                    }else if (old_value > 5){
                        new_value = 10;
                    }
                } else if (input_id == "inputNumber5"){
                    if (old_value == 0){
                        new_value = 0;
                    }else if (old_value == 1){
                        new_value = 5;
                    }else if (old_value == 2){
                        new_value = 9;
                    }else{
                        new_value = 0;
                    }
                } else if (input_id == "inputNumber6"){
                    if (old_value == 0){
                        new_value = 0;
                    }else if (old_value == 1){
                        new_value = 3.6;
                    }else if (old_value == 2){
                        new_value = 5;
                    }else if (old_value == 3){
                        new_value = 6.4;
                    }else if (old_value == 4){
                        new_value = 5.6;
                    }else if (old_value == 5){
                        new_value = 7;
                    }else if (old_value > 5){
                        new_value = 10;
                    }
                } else if (input_id == "inputNumber7"){
                    if (old_value == 0){
                        new_value = 0;
                    }else if (old_value <= 100){
                        new_value = 2.4;
                    }else if (100 < old_value && old_value <= 200){
                        new_value = 2.9;
                    }else if (200 < old_value && old_value <= 300){
                        new_value = 4;
                    }else if (300 < old_value && old_value <= 400){
                        new_value = 5.2;
                    }else if (400 < old_value && old_value <= 500){
                        new_value = 5.6;
                    }else if (500 < old_value && old_value <= 600){
                        new_value = 4.4;
                    }else if (600 < old_value && old_value <= 700){
                        new_value = 4.9;
                    }else if (700 < old_value && old_value <= 800){
                        new_value = 6;
                    }else if (800 < old_value && old_value <= 900){
                        new_value = 7.2;
                    }else if (900 < old_value && old_value <= 1000){
                        new_value = 6.8;
                    }else if (1000 < old_value && old_value <= 1200){
                        new_value = 8;
                    }else if (1200 <= old_value){
                        new_value = 10;
                    }
                } else if (input_id == "inputNumber8"){
                    if (old_value == 0){
                        new_value = 0;
                    }else if (old_value == 1){
                        new_value = 3.6;
                    }else if (old_value == 2){
                        new_value = 5;
                    }else if (old_value == 3){
                        new_value = 6.4;
                    }else if (old_value == 4){
                        new_value = 7;
                    }else if (old_value == 5){
                        new_value = 8;
                    }else if (old_value > 5){
                        new_value = 10;
                    }
                } else if (input_id == "inputNumber9"){
                    if (old_value == 0){
                        new_value = 0;
                    }else if (old_value >= 1 && old_value <= 500) {
                        new_value = 8;
                    } else if (old_value >= 501 && old_value <= 1000) {
                        new_value = 6;
                    } else if (old_value >= 1001 && old_value <= 2000) {
                        new_value = 4;
                    } else if (old_value >= 2001) {
                        new_value = 1;
                    }

                }
                return new_value;
            }

            function max_graph(graph, q_length) {
                if (q_length == 3) {
                    if (graph[0] == 1) {
                        return ["rgb(243, 21, 89)", "Past"];
                    } else if (graph[(graph.length - 1) / 2] == 1) {
                        return ["rgb(241, 201, 59)", "Yaxshi"];
                    } else {
                        return ["rgb(80, 255, 0)", "Yuqori"];
                    }
                }else{
                    if (graph[0] == 1) {
                        return ["rgb(243, 21, 89)", "Past"];
                    } else if (graph[40] == 1) {
                        return ["rgb(241, 201, 59)", "O'rta"];
                    } else if (graph[60] == 1) {
                        return ["rgb(117, 194, 246)", "Yaxshi"];
                    } else {
                        return ["rgb(80, 255, 0)", "Yuqori"];
                    }
                }
            }
            
            let timeoutId; 
            function update(inputNumber, outputId, norm_val, text, n_norm_val, n_text, hide_word, range_value_1, q, chart){
                const range_value = document.getElementById(range_value_1);
                range_value.innerHTML = document.getElementById(inputNumber).value;
                clearTimeout(timeoutId);
                timeoutId = setTimeout(() => {
                    const inputElement1 = document.getElementById(inputNumber);
                    const output = document.querySelectorAll(outputId);
                    const value = parseFloat(type_input(inputNumber));
                    const qw = qwerty(q, value);
                    const qy = qwerty1(q, value);
                    const norm = normal(qw, value);
                    const norm1 = normal(qy, value);
                    const color = max_graph(qw, parseInt(q.length))[0];
                    const color1 = max_graph(qy, parseInt(q.length))[0];

                    for (const i of output) {
                        i.innerHTML = inputElement1.value;
                        i.style.color = color;
                    }
                    const norm_val_1 = document.getElementById(norm_val);
                    norm_val_1.innerHTML = norm[value * 10].toFixed(2);
                    norm_val_1.style.color = color;

                    const n_norm_val_1 = document.getElementById(n_norm_val);
                    n_norm_val_1.innerHTML = norm1[value * 10].toFixed(2);
                    n_norm_val_1.style.color = color1;
                    if (norm[value * 10].toFixed(2) == 1) {
                        n_norm_val_1.style.display = "none";
                    } else {
                        n_norm_val_1.style.display = "inline-block";
                    }

                    const text_1 = document.getElementById(text);
                    text_1.innerHTML = max_graph(qw, parseInt(q.length))[1];
                    text_1.style.color = color;
                    

                    const n_text_1 = document.getElementById(n_text);
                    n_text_1.innerHTML = max_graph(qy, parseInt(q.length))[1];
                    n_text_1.style.color = color1;
                    if (norm[value * 10].toFixed(2) == 1) {
                        n_text_1.style.display = "none";
                    } else {
                        n_text_1.style.display = "inline-block";
                    }

                    const hide_word_1 = document.getElementById(hide_word);
                    if (norm[value * 10].toFixed(2) == 1) {
                        hide_word_1.style.display = "none";
                    } else {
                        hide_word_1.style.display = "inline-block";
                    }

                    const updatedData = [
                                         [[[value, 0], [value, norm[value * 10]]], "rgb(1, 0, 0)", false],
                                         [qw, color, false],
                                         [norm, "rgba(241, 201, 59, 0)", true],

                                         [[[value, 0], [value, norm1[value * 10]]], "rgb(255, 0, 0)", false],
                                         [qy, color1, false],
                                         [norm1, "rgba(241, 201, 59, 0)", true],
                                        ]
                    chart.updateChartData(updatedData);
                }, 300);
            }
            x_val = [5, 5, 5, 5, 5, 5, 5, 5, 5];

            document.getElementById("inputNumber1").addEventListener("input", function(){
                x_val[0] = parseFloat(type_input("inputNumber1"));
                chart_result.data.datasets[0].data = calc(x_val).total;
                updateAll(x_val);
                chart_result.update();
                update("inputNumber1",".output_1", "norm_val_1", "text_1", "n_norm_val_1", "n_text_1", "hide_word_1", "range_value_1", q1, dragChart_1);
            });
            document.getElementById("inputNumber2").addEventListener("input", function(){
                x_val[1] = parseFloat(type_input("inputNumber2"));
                chart_result.data.datasets[0].data = calc(x_val).total;
                updateAll(x_val);
                chart_result.update();
                update("inputNumber2",".output_2", "norm_val_2", "text_2", "n_norm_val_2", "n_text_2", "hide_word_2", "range_value_2", q2, dragChart_2);
            });
            document.getElementById("inputNumber3").addEventListener("input", function(){
                x_val[2] = parseFloat(type_input("inputNumber3"));
                chart_result.data.datasets[0].data = calc(x_val).total;
                updateAll(x_val);
                chart_result.update();
                update("inputNumber3",".output_3", "norm_val_3", "text_3", "n_norm_val_3", "n_text_3", "hide_word_3", "range_value_3", q3, dragChart_3);
            });
            document.getElementById("inputNumber4").addEventListener("input", function(){
                x_val[3] = parseFloat(type_input("inputNumber4"));
                chart_result.data.datasets[0].data = calc(x_val).total;
                updateAll(x_val);
                chart_result.update();
                update("inputNumber4",".output_4", "norm_val_4", "text_4", "n_norm_val_4", "n_text_4", "hide_word_4", "range_value_4", q4, dragChart_4);
            });
            document.getElementById("inputNumber5").addEventListener("input", function(){
                x_val[4] = parseFloat(type_input("inputNumber5"));
                chart_result.data.datasets[0].data = calc(x_val).total;
                updateAll(x_val);
                chart_result.update();
                update("inputNumber5",".output_5", "norm_val_5", "text_5", "n_norm_val_5", "n_text_5", "hide_word_5", "range_value_5", q5, dragChart_5);
            });
            document.getElementById("inputNumber6").addEventListener("input", function(){
                x_val[5] = parseFloat(type_input("inputNumber6"));
                chart_result.data.datasets[0].data = calc(x_val).total;
                chart_result.update();
                updateAll(x_val);
                update("inputNumber6",".output_6", "norm_val_6", "text_6", "n_norm_val_6", "n_text_6", "hide_word_6", "range_value_6", q6, dragChart_6);
            });
            document.getElementById("inputNumber7").addEventListener("input", function(){
                x_val[6] = parseFloat(type_input("inputNumber7"));
                chart_result.data.datasets[0].data = calc(x_val).total;
                chart_result.update();
                updateAll(x_val);
                update("inputNumber7",".output_7", "norm_val_7", "text_7", "n_norm_val_7", "n_text_7", "hide_word_7", "range_value_7", q7, dragChart_7);
            });
            document.getElementById("inputNumber8").addEventListener("input", function(){
                x_val[7] = parseFloat(type_input("inputNumber8"));
                chart_result.data.datasets[0].data = calc(x_val).total;
                chart_result.update();
                updateAll(x_val);
                update("inputNumber8",".output_8", "norm_val_8", "text_8", "n_norm_val_8", "n_text_8", "hide_word_8", "range_value_8", q8, dragChart_8);
            });
            document.getElementById("inputNumber9").addEventListener("input", function(){
                x_val[8] = parseFloat(type_input("inputNumber9"));
                chart_result.data.datasets[0].data = calc(x_val).total;
                chart_result.update();
                updateAll(x_val);
                update("inputNumber9",".output_9", "norm_val_9", "text_9", "n_norm_val_9", "n_text_9", "hide_word_9", "range_value_9", q9, dragChart_9);
            });

            const ctx = document.getElementById("chart_result").getContext('2d');
            const chart_result = new Chart(ctx, {
            type: "line",
            data: {
                labels: x,
                datasets: [
                {
                    label: "Umumiy",
                    data: calc(x_val).total,
                    borderColor: "rgb(80, 255, 0)",
                    borderWidth: 3,
                    fill: true,
                    pointRadius: 0,
                },
                ],
            },
            options: {
                scales: {
                x: {
                    title: {
                    display: true,
                    text: "x",
                    },
                },
                y: {
                    title: {
                    display: true,
                    text: "Umumiy",
                    },
                    suggestedMin: 0,
                    suggestedMax: 1,
                },
                },
            },
            });
        </script>
        
    </body>
</html>
